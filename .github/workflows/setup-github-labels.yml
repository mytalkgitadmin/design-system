name: Setup GitHub Labels

on:
  workflow_dispatch:

jobs:
  setup-labels:
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Create work management labels
        run: |
          echo "ğŸ·ï¸  GitHub ë¼ë²¨ ì„¤ì • ì¤‘..."
          echo ""
          echo "ğŸ“ ì‘ì—… ê´€ë¦¬ ë¼ë²¨ ìƒì„± ì¤‘..."
          
          # work:start ë¼ë²¨
          gh label create "work:start" \
            --color "10B981" \
            --description "ğŸš€ ì‘ì—… ì‹œì‘ - Jira Work Log ì‹œì‘" \
            --force || echo "âœ… 'work:start' ë¼ë²¨ ì—…ë°ì´íŠ¸ ì™„ë£Œ"
          
          # work:end ë¼ë²¨
          gh label create "work:end" \
            --color "EF4444" \
            --description "âœ… ì‘ì—… ì¢…ë£Œ - Jira Work Log ì¢…ë£Œ" \
            --force || echo "âœ… 'work:end' ë¼ë²¨ ì—…ë°ì´íŠ¸ ì™„ë£Œ"
        env:
          GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}

      - name: Create status management labels
        run: |
          echo ""
          echo "ğŸ“Š ìƒíƒœ ê´€ë¦¬ ë¼ë²¨ ìƒì„± ì¤‘..."
          
          # in progress ë¼ë²¨
          gh label create "in progress" \
            --color "F59E0B" \
            --description "ğŸŸ¡ ì§„í–‰ ì¤‘ - Jira: In Progress" \
            --force || echo "âœ… 'in progress' ë¼ë²¨ ì—…ë°ì´íŠ¸ ì™„ë£Œ"
          
          # review ë¼ë²¨
          gh label create "review" \
            --color "3B82F6" \
            --description "ğŸ”µ ë¦¬ë·° ì¤‘ - Jira: In Review" \
            --force || echo "âœ… 'review' ë¼ë²¨ ì—…ë°ì´íŠ¸ ì™„ë£Œ"
          
          # blocked ë¼ë²¨
          gh label create "blocked" \
            --color "6B7280" \
            --description "ğŸš« ë¸”ë¡œí‚¹ë¨ - Jira: Blocked" \
            --force || echo "âœ… 'blocked' ë¼ë²¨ ì—…ë°ì´íŠ¸ ì™„ë£Œ"
        env:
          GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}

      - name: Summary
        run: |
          echo ""
          echo "ğŸ‰ ë¼ë²¨ ì„¤ì • ì™„ë£Œ!"
          echo ""
          echo "âœ… ìƒì„±ëœ ë¼ë²¨:"
          gh label list --json name,description,color | jq -r '.[] | select(.name | test("work:|in progress|review|blocked")) | "  - \(.name) (\(.color)): \(.description)"'
          echo ""
          echo "ğŸ“Œ ë‹¤ìŒ ë‹¨ê³„:"
          echo "  1. GitHub Issue ìƒì„±"
          echo "  2. 'work:start' ë¼ë²¨ ì¶”ê°€ë¡œ ì‘ì—… ì‹œì‘"
          echo "  3. 'review' ë¼ë²¨ ì¶”ê°€ë¡œ ë¦¬ë·° ìš”ì²­"
          echo "  4. 'work:end' ë¼ë²¨ ì¶”ê°€ë¡œ ì‘ì—… ì™„ë£Œ"
        env:
          GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}

      - name: Create summary issue
        uses: actions-cool/issues-helper@v3
        with:
          actions: "create-issue"
          token: ${{ secrets.GITHUB_TOKEN }}
          title: "âœ… GitHub ë¼ë²¨ ì„¤ì • ì™„ë£Œ"
          body: |
            ## ğŸ‰ GitHub ë¼ë²¨ì´ ì„¤ì •ë˜ì—ˆìŠµë‹ˆë‹¤!
            
            **ì„¤ì • ì‹œê°„**: ${{ github.event.repository.updated_at }}
            
            ### ğŸ·ï¸ ìƒì„±ëœ ë¼ë²¨
            
            #### ì‘ì—… ê´€ë¦¬
            - ğŸš€ `work:start` - ì‘ì—… ì‹œì‘ (Jira Work Log ì‹œì‘)
            - âœ… `work:end` - ì‘ì—… ì¢…ë£Œ (Jira Work Log ì¢…ë£Œ)
            
            #### ìƒíƒœ ê´€ë¦¬
            - ğŸŸ¡ `in progress` - ì§„í–‰ ì¤‘ (Jira: In Progress)
            - ğŸ”µ `review` - ë¦¬ë·° ì¤‘ (Jira: In Review)
            - ğŸš« `blocked` - ë¸”ë¡œí‚¹ë¨ (Jira: Blocked)
            
            ### ğŸ’¡ ì‚¬ìš© ë°©ë²•
            
            1. **ì‘ì—… ì‹œì‘**: Issueì— `work:start` ë¼ë²¨ ì¶”ê°€
            2. **ìƒíƒœ ë³€ê²½**: `in progress`, `review`, `blocked` ë¼ë²¨ ì¶”ê°€
            3. **ì‘ì—… ì¢…ë£Œ**: Issueì— `work:end` ë¼ë²¨ ì¶”ê°€
            
            ëª¨ë“  ë¼ë²¨ ë³€ê²½ì€ ìë™ìœ¼ë¡œ Jiraì™€ ë™ê¸°í™”ë©ë‹ˆë‹¤!
            
            ---
            
            **ë‹¤ìŒ ë‹¨ê³„**: Actions íƒ­ì—ì„œ "Setup Jira Workflow"ë¥¼ ì‹¤í–‰í•˜ì„¸ìš”.
          labels: "automation,config"

